<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold HyperFlow Scalper - Live Dashboard</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f947.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-streaming@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Material+Icons&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="background-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo">
                    <span class="material-icons logo-icon">analytics</span>
                    <span class="logo-text">ALGOMAXX</span>
                </div>
                <div class="nav-subtitle">Real-Time Trading Intelligence</div>
            </div>
            <div class="nav-right">
                <div class="connection-status" id="connectionStatus">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">Connecting...</span>
                </div>
                <div class="last-update">
                    <span class="material-icons">schedule</span>
                    <span id="lastUpdate">--:--:--</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1 class="hero-title">
                <span class="material-icons hero-icon">rocket_launch</span>
                Gold HyperFlow Scalper
            </h1>
            <p class="hero-subtitle">Advanced AI-Powered Trading System</p>
        </div>

        <!-- Quick Stats Cards -->
        <div class="quick-stats">
            <div class="stat-card elevation-2">
                <div class="stat-icon success-bg">
                    <span class="material-icons">account_balance_wallet</span>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Balance</div>
                    <div class="stat-value" id="balance">$0.00</div>
                </div>
            </div>
            <div class="stat-card elevation-2">
                <div class="stat-icon info-bg">
                    <span class="material-icons">trending_up</span>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Equity</div>
                    <div class="stat-value" id="equity">$0.00</div>
                </div>
            </div>
            <div class="stat-card elevation-2">
                <div class="stat-icon warning-bg">
                    <span class="material-icons">show_chart</span>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Floating P/L</div>
                    <div class="stat-value" id="floatingPL">$0.00</div>
                </div>
            </div>
            <div class="stat-card elevation-2">
                <div class="stat-icon primary-bg">
                    <span class="material-icons">assessment</span>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Daily P/L</div>
                    <div class="stat-value" id="dailyPL">$0.00</div>
                </div>
            </div>
        </div>

        <!-- Real-Time Equity Chart -->
        <div class="chart-section elevation-3">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="material-icons">timeline</span>
                    Live Equity Curve
                </h2>
                <div class="chart-controls">
                    <!-- MISSING BUTTONS ADDED HERE -->
                    <button class="btn-view" onclick="switchToHistory()" id="historyViewBtn">
                        <span class="material-icons">history</span>
                        <span>Full History</span>
                    </button>
                    <button class="btn-view" onclick="switchToLive()" id="liveViewBtn">
                        <span class="material-icons">flash_on</span>
                        <span>Live View</span>
                    </button>
                    <button class="btn-icon" onclick="toggleChartPause()" id="pauseBtn">
                        <span class="material-icons">pause</span>
                    </button>
                    <button class="btn-icon" onclick="resetChart()">
                        <span class="material-icons">refresh</span>
                    </button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="equityChart"></canvas>
            </div>
        </div>

        <!-- Performance Grid -->
        <div class="performance-grid">
            <div class="perf-card elevation-2">
                <div class="perf-header">
                    <span class="material-icons">calendar_today</span>
                    <span>Daily Trades</span>
                </div>
                <div class="perf-value" id="dailyTrades">0</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header success">
                    <span class="material-icons">check_circle</span>
                    <span>Wins</span>
                </div>
                <div class="perf-value success" id="wins">0</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header danger">
                    <span class="material-icons">cancel</span>
                    <span>Losses</span>
                </div>
                <div class="perf-value danger" id="losses">0</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header primary">
                    <span>ðŸŽ¯  Win Rate</span>
                </div>
                <div class="perf-value primary" id="winRate">0%</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header warning">
                    <span class="material-icons">local_fire_department</span>
                    <span>Consecutive Losses</span>
                </div>
                <div class="perf-value warning" id="consecLosses">0</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header info">
                    <span class="material-icons">location_on</span>
                    <span>Open Positions</span>
                </div>
                <div class="perf-value info" id="openPositions">0</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header">
                    <span class="material-icons">flash_on</span>
                    <span>EA Status</span>
                </div>
                <div class="perf-status" id="eaStatus">MONITORING</div>
            </div>
            <div class="perf-card elevation-2">
                <div class="perf-header">
                    <span class="material-icons">swap_horiz</span>
                    <span>Last Trade</span>
                </div>
                <div class="perf-status" id="lastTrade">NONE</div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
            <div class="chart-section elevation-3">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">bar_chart</span>
                        Recent Performance
                    </h2>
                </div>
                <div class="chart-container">
                    <canvas id="tradesChart"></canvas>
                </div>
            </div>
            <div class="chart-section elevation-3">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">donut_large</span>
                        Win/Loss Ratio
                    </h2>
                </div>
                <div class="chart-container">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Trade History Table -->
        <div class="table-section elevation-3">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="material-icons">history</span>
                    Trade History
                </h2>
                <div class="table-filter">
                    <span class="material-icons">filter_list</span>
                    <span>Last 50 Trades</span>
                </div>
            </div>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Type</th>
                            <th>Open Time</th>
                            <th>Close Time</th>
                            <th>Open Price</th>
                            <th>Close Price</th>
                            <th>Lots</th>
                            <th>Profit</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody id="tradesTableBody">
                        <tr>
                            <td colspan="9" class="no-data">
                                <span class="material-icons">hourglass_empty</span>
                                <span>Loading trade data...</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <span class="material-icons">analytics</span>
                <span>ALGOMAXX</span>
            </div>
            <div class="footer-text">Gold HyperFlow Scalper - Professional Trading System</div>
            <div class="footer-tech">
                <span class="material-icons">cloud</span>
                <span>Powered by Google Sheets & Real-Time Analytics</span>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
